/*!
 * name: @jswork/next-gm-xhr
 * description: GM_xmlhttpRequest for next.
 * homepage: https://github.com/afeiship/next-gm-xhr
 * version: 1.0.0
 * date: 2020-11-19 22:08:05
 * license: MIT
 */
!function(){var i=(this||window||Function("return this")()).nx||require("@jswork/next"),d=i.DataTransform||require("@jswork/next-data-transform"),e=i.AbstractRequest||require("@jswork/next-abstract-request"),p=i.contentType||require("@jswork/next-content-type"),m=i.deepAssign||require("@jswork/next-deep-assign"),x=i.param||require("@jswork/next-param"),t={dataType:"json",responseType:"json"},e=i.declare("nx.GmXhr",{extends:e,methods:{defaults:function(){return t},request:function(e,t,n,r){var o=i.mix(null,this.options,r),s="get"===e,r=s?null:d[o.dataType](n),a=s?x(n,t):t,t={"Content-Type":p(o.dataType)},u=m({method:e,data:r,headers:t},o);return new Promise(function(t,e){GM_xmlhttpRequest(i.mix({url:a,onload:function(e){t(e.response)},onerror:e,onabort:e,ontimeout:e},u))})}}});"undefined"!=typeof module&&module.exports&&(module.exports=e)}();